# RKN Downloader

Приложение для выгрузки реестров РосКомНадзора операторами связи.

Поддерживаются:

* Единый реестр доменных имён, указателей страниц сайтов в сети «Интернет» и сетевых адресов, позволяющих идентифицировать сайты в сети «Интернет», содержащие информацию, распространение которой в Российской Федерации запрещено
* Перечень отечественных социально значимых информационных ресурсов в информационно-телекоммуникационной сети «Интернет» (с 01.02.2022 г.)

## How-to

1. Создать каталог для данных, например ```/opt/rknd/data```, куда положить файлы ```request.xml``` и ```request.xml.p7s``` - запрос на выгрузку и цифровая подпись к нему. Цифровую подпись можно сделать в Крипто-Про или Крипто-АРМ.
2. Собираем docker-образ (команда ниже)
3. Запустить docker-контейнер в режиме отладки, проверить что реестры выгружаются, остановить и запустить уже в режиме демона для постоянной работы

Приложение проверяет доступность нового файла реестра раз в 30 минут. Если доступна новая версия реестра - она скачивается и помещается в каталог ```data```.

Возможен запуск нескольких контейнеров для операторов, просто запустите несколько экземпляров контейнера, указав разные каталоги ```data``` в опции -v

## Сборка образа
```
docker build -t rknloader .
```

## Запуск для отладки
```
docker run -it --rm -v /opt/rknd/data:/app/data rknloader
```

## Запуск в режиме демона
```
docker run -d --restart=always -v /opt/rknd/data:/app/data rknloader
```

